(this["webpackJsonptoilet-finder"]=this["webpackJsonptoilet-finder"]||[]).push([[0],{56:function(e,t,o){},60:function(e,t,o){"use strict";o.r(t);var n=o(25),a=o(26),s=o(9),r=o(30),i=o(29),c=o(3),l=o(10),d=o.n(l),u=o(27),h=o.n(u),p=o(15),g=o.n(p),f=(o(56),o(5)),m=o.n(f),b=o(62),O=o(64),j=o(63),A=o(65),v=o(2);h.a.initialize({gtmId:"GTM-NM4MJGQ"});var S=function(e){Object(r.a)(o,e);var t=Object(i.a)(o);function o(){var e;return Object(n.a)(this,o),(e=t.call(this)).state={markers:[],usersPositionObtained:"NO",toiletsFound:"NO",rangeSlider:500},e.handleChange=e.handleChange.bind(Object(s.a)(e)),e.refreshComponent=e.refreshComponent.bind(Object(s.a)(e)),e}return Object(a.a)(o,[{key:"componentDidMount",value:function(){var e=this;window.navigator.geolocation.getCurrentPosition((function(t){console.log("Current user's location is "+t.coords.latitude+", "+t.coords.longitude),e.setState({usersPositionObtained:"YES"});var o=e.state.markers;console.log("before ",e.state.markers),o.push([t.coords.latitude,t.coords.longitude]),e.setState({markers:o}),console.log("after",e.state.markers),g.a.post("https://loocation-toiletfinder-server.herokuapp.com/api/toilets-dist/",{lat:t.coords.latitude,long:t.coords.longitude,distance:Number(e.state.rangeSlider)}).then((function(t){"undefined"!==typeof t.data.data&&t.data.data.length>0&&(e.setState({toiletsFound:"YES"}),t.data.data.forEach((function(t){var n=t.loc;o.push([n.coordinates[1],n.coordinates[0]]),e.setState({markers:o}),console.log("FROM POST REQUEST: coordinates lat: "+n.coordinates[1]+" coordinates long: "+n.coordinates[0])})))})).catch((function(e){console.log(e)}))}))}},{key:"refreshComponent",value:function(){var e=this;window.navigator.geolocation.getCurrentPosition((function(t){console.log("Current user's location is "+t.coords.latitude+", "+t.coords.longitude),e.setState({usersPositionObtained:"YES"}),e.setState({markers:[]}),e.setState({toiletsFound:"NO"});var o=e.state.markers;e.setState({markers:o}),o.push([t.coords.latitude,t.coords.longitude]),e.handleChange=e.handleChange.bind(e),g.a.post("https://loocation-toiletfinder-server.herokuapp.com/api/toilets-dist/",{lat:t.coords.latitude,long:t.coords.longitude,distance:Number(e.state.rangeSlider)}).then((function(t){"undefined"!==typeof t.data.data&&t.data.data.length>0&&(e.setState({toiletsFound:"YES"}),t.data.data.forEach((function(t){var n=t.loc;o.push([n.coordinates[1],n.coordinates[0]]),e.setState({markers:o}),console.log("FROM POST REQUEST: coordinates lat: "+n.coordinates[1]+" coordinates long: "+n.coordinates[0])})))})).catch((function(e){console.log(e)}))}))}},{key:"openPopup",value:function(e){e&&e.leafletElement&&window.setTimeout((function(){e.leafletElement.openPopup()}))}},{key:"handleChange",value:function(e){this.setState({rangeSlider:e.target.value})}},{key:"userLocationObtained",value:function(e,t){var o=new m.a.Icon({iconUrl:"data:image/png;base64,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",popupAnchor:[-0,-0],iconSize:[32,45]});return 0===e?Object(v.jsx)(b.a,{position:t,ref:this.openPopup,children:Object(v.jsx)(O.a,{children:Object(v.jsx)("span",{children:"You are Here !"})})},"marker-".concat(e)):Object(v.jsx)(b.a,{icon:o,position:t,onClick:this.openPopup,children:Object(v.jsxs)(O.a,{children:["Click\xa0",Object(v.jsx)("a",{href:"http://maps.google.com/maps?daddr=".concat(t[0],",").concat(t[1],"&amp;ll="),target:"_blank",rel:"noopener noreferrer",children:"here"}),"\xa0 to navigate to this location"]})},"marker-".concat(e))}},{key:"render",value:function(){var e,t=this,o=this.state.toiletsFound;"NO"===o&&"YES"===this.state.usersPositionObtained?e=Object(v.jsxs)("p",{children:["Sadly, there were no toilets found, this is likely because there are no toilets in the vicinity of ",this.state.rangeSlider," meters",Object(v.jsxs)("i",{children:[Object(v.jsx)("br",{}),"For developers, and those interested, try overriding the GPS sensor to -37.818078, 144.96681"]})]}):"YES"===o&&(e=Object(v.jsx)("p",{children:"Bust before you rust! Your kidneys will thank you later!"}));var n="red";return"YES"===this.state.usersPositionObtained&&(n="green"),Object(v.jsxs)("div",{className:"map",children:[Object(v.jsx)("h1",{className:"test",children:" LooCation "}),Object(v.jsxs)("p",{children:[" Note - the current search radius is ",this.state.rangeSlider," meters"]}),Object(v.jsxs)("p",{children:[" User Position Obtained: ",Object(v.jsxs)("span",{className:n,children:[" ",this.state.usersPositionObtained," "]})," "]}),e,Object(v.jsxs)("p",{children:[" Change Toilet Search Radius :",Object(v.jsx)("input",{id:"typeinp",type:"range",min:"100",max:"3000",value:this.state.rangeSlider,onChange:this.handleChange,step:"100"}),Object(v.jsx)("button",{onClick:this.refreshComponent,children:"Refresh"})]}),Object(v.jsxs)(j.a,{center:[-37.808163434,144.957829502],zoom:16,style:{width:"80%",height:"40em",margin:"auto"},children:[Object(v.jsx)(A.a,{url:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, \xa9 <a href="https://carto.com/attribution">CARTO</a>'}),this.state.markers.map((function(e,o){return t.userLocationObtained(o,e)}))]})]})}}]),o}(c.Component);d.a.render(Object(v.jsx)(S,{}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.81bfd376.chunk.js.map